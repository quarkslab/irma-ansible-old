---

## Global
probe_user: "{{ default_user }}"
probe_group: "{{ default_group }}"

probe_project_dir: /opt/irma/irma-probe
probe_install_dir: "{{ probe_project_dir }}/current"
probe_venv_dir: "{{ probe_install_dir }}/venv"


## Deployment
probe_deployment_repository: "https://github.com/quarkslab/irma-probe.git"
probe_deployment_configs:
  - section: broker_probe
    option: host
    value: "{{irma_configurations.brain_addr}}"
  - section: broker_probe
    option: vhost
    value: "{{irma_configurations.rabbitmq.probe.vhost}}"
  - section: broker_probe
    option: username
    value: "{{irma_configurations.rabbitmq.probe.user}}"
  - section: broker_probe
    option: password
    value: "{{irma_configurations.rabbitmq.probe.password}}"
  - section: backend_probe
    option: host
    value: "{{irma_configurations.brain_addr}}"
  - section: ftp_brain
    option: host
    value: "{{irma_configurations.brain_addr}}"
  - section: ftp_brain
    option: username
    value: "{{irma_configurations.pureftpd.probe.username}}"
  - section: ftp_brain
    option: password
    value: "{{irma_configurations.pureftpd.probe.password}}"

## Supervisor Role
supervisor_programs_probe:
  - name: probe_app
    command: "{{ probe_venv_dir }}/bin/celery worker -A probe.tasks --hostname=probe_app.%%h {{default_celery_options}}"
    directory: "{{ probe_install_dir }}"
    user: "{{ irma_user }}"
    numprocs: 1
    stdout_logfile: /var/log/supervisor/probe.log
    stderr_logfile: /var/log/supervisor/probe.log
    autostart: true
    stopwaitsecs: 600
    killasgroup: true

# VirusTotal module configuration
# Uncomment this to share an apikey to all virustotal probes
# virustotal_configs:
#   - section: VirusTotal
#     option: private
#     value: False
#   - section: VirusTotal
#     option: apikey
#     value: 88eb8e2f869e98ea9b0367cb47c143cb438a5e8d8dfd3b6e3fb6c898374b8fb6

# Bit Defender Scanner key - Put your licence key here
# bitdefender_scanner_key:
